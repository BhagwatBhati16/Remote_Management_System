<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Management Panel</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@400;500;600;700&family=Material+Symbols+Outlined" rel="stylesheet">
  <style>
    body { margin:0; font-family:'Open Sans',system-ui,sans-serif; background:#111827; color:#d1d5db; }
    a { text-decoration:none; color:inherit; }
    .layout { display:flex; flex-direction:column; height:100vh; }
    nav { background:#1f2937; color:#f3f4f6; padding:16px 24px; display:flex; align-items:center; justify-content:space-between; border-bottom:1px solid #374151; box-shadow:0 2px 4px -2px rgba(0,0,0,.4); }
    nav h1 { font-size:20px; font-weight:700; letter-spacing:.03em; margin:0; }
    .nav-actions { display:flex; gap:16px; align-items:center; }
    .icon-btn { padding:8px; border-radius:9999px; background:#374151; display:inline-flex; align-items:center; justify-content:center; transition:background .2s; border:0; }
    .icon-btn:hover { background:#4b5563; }
    .btn { background:#374151; color:#e5e7eb; padding:8px 16px; border-radius:10px; font-weight:500; display:inline-flex; gap:8px; align-items:center; transition:background .2s; }
    .btn:hover { background:#4b5563; }
    .content { flex:1; padding:16px; overflow:auto; }
    .grid { display:grid; gap:12px; grid-template-columns:repeat(auto-fill,minmax(220px,220px)); grid-auto-rows:220px; align-items:start; }
    .card { background:#1f2937; border:1px solid #374151; border-radius:14px; padding:8px; display:flex; flex-direction:column; box-shadow:0 2px 4px -2px rgba(0,0,0,.4); transition:box-shadow .25s, transform .25s; overflow:hidden; }
    .card:hover { box-shadow:0 6px 14px -4px rgba(0,0,0,.55); }
    .card-header { display:flex; justify-content:space-between; align-items:center; margin-bottom:4px; }
    .card-title { font-weight:600; color:#f3f4f6; font-size:14px; max-width:130px; white-space:nowrap; overflow:hidden; text-overflow:ellipsis; margin:0; }
    .status { display:inline-flex; align-items:center; padding:2px 8px; font-size:11px; border-radius:9999px; background:rgba(20,83,45,.5); color:#74de80; font-weight:500; }
    .status-dot { width:8px; height:8px; border-radius:50%; background:#22c55e; margin-right:6px; }
    .meta { font-size:12px; color:#d1d5db; display:flex; flex-direction:column; gap:6px; flex-grow:0; }
    .meta-row { display:flex; gap:6px; align-items:center; min-width:0; }
    .meta-row span.value { white-space:nowrap; overflow:hidden; text-overflow:ellipsis; }
    .card-footer { margin-top:auto; display:flex; justify-content:flex-end; }
    .details-link { font-size:12px; font-weight:500; color:#e5e7eb; transition:color .2s; }
    .details-link:hover { color:#f9fafb; }
    .material-symbols-outlined { font-variation-settings:'FILL' 0,'wght' 400,'GRAD' 0,'opsz' 24; font-size:18px; line-height:1; color:#9ca3af; }
  </style>
</head>
<body>
  <div class="layout" id="webcrumbs">
    <nav>
      <h1>MANAGEMENT PANEL</h1>
      <div class="nav-actions">
        <a href="{% url 'clients:add_client' %}" class="btn"><span class="material-symbols-outlined">add_circle</span>New Client</a>
        <a href="{% url 'clients:script_generator' %}" class="btn"><span class="material-symbols-outlined">terminal</span>Generate Script</a>
      </div>
    </nav>
    <main class="content">
      <div class="grid">
        {% for c in clients %}
          <div class="card">
            <div class="card-header">
              <h2 class="card-title">{{ c.name }}</h2>
              <span class="status"><span class="status-dot"></span>Online</span>
            </div>
            <div class="meta">
              <div class="meta-row"><span class="material-symbols-outlined">lan</span><span class="value">{{ c.ip_address }}</span></div>
              <div class="meta-row"><span class="material-symbols-outlined">memory</span><span class="value">{{ c.os_name|default:'Unknown OS' }}</span></div>
            </div>
            <div class="card-footer">
              <a class="details-link" href="{% url 'clients:client_detail' c.id %}">View Details â†’</a>
            </div>
          </div>
        {% empty %}
          <div style="color:#9ca3af; font-size:14px;">No clients yet. Use New Client to add one.</div>
        {% endfor %}
      </div>
    </main>
  </div>
</body>
</html>
